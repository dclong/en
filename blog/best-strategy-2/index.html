<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Which One Is the Best Strategy? (continued)</title>
  <meta name="author" content="Ben Chuanlong Du">

  <link href="https://www.legendu.net/en/atom.xml" type="application/atom+xml" rel="alternate"
        title="Ben Chuanlong Du's Blog Atom Feed" />


  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://www.legendu.net/en/favicon.png" rel="icon">
  <link href="https://www.legendu.net/en/theme/css/main_2.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="https://www.legendu.net/en/theme/js/modernizr-2.0.js"></script>
  <script src="https://www.legendu.net/en/theme/js/ender.js"></script>
  <script src="https://www.legendu.net/en/theme/js/octopress.js" type="text/javascript"></script>

  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <script data-ad-client="ca-pub-3836424032203369" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="https://www.legendu.net/en/">Ben Chuanlong Du's Blog</a></h1>
    <h2>And let it direct your passion with reason.</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="https://www.legendu.net/en/atom.xml" rel="subscribe-rss">RSS</a></li>
</ul>

<form name="search" action="https://www.bing.com/search" method="get" onSubmit="return build_query()">
  <fieldset role="search">
      <!--
    <input type="hidden" name="q" value="site:https://www.legendu.net/en" />
        -->
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<script type = "text/javascript">
    function build_query() {
        var query = document.forms["search"]["q"].value;
        var prefix = "site:https://www.legendu.net/en "
        if (!query.startsWith(prefix)) {
            query = prefix + query;
            document.forms["search"]["q"].value = query;
        }
        return true;
    }
</script>

<ul class="main-navigation">
    <li><a href="https://www.legendu.net">Home</a></li>
    <li><a href="https://www.legendu.net/en">Blog</a></li>
    <li><a href="https://www.legendu.net/en/archives.html">Archives</a></li>
    <li><a href="https://www.legendu.net/pages/about">About</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Which One Is the Best Strategy? (continued)</h1>
      <p class="meta"><time datetime="2012-07-30T15:13:01-07:00" pubdate>Jul 30, 2012</time></p>
</header>

  <div class="entry-content"><p><img src="http://dclong.github.io/media/pattern/coin.jpg" height="200" width="240" align="right"/></p>
<p>Suppose we flip a coin which has probability 0.7 to be head again 
and again and two people choose two different sequences of length 3 (e.g., THH). 
The people whose sequence appears first wins. 
If you are allowed to choose first, which sequence will you choose?</p>
<p>I discussed about the following interesting probability problem in my post 
<a href="http://dclong.github.io/en/blog/best-strategy/">Which One is the Best Strategy?</a> before.
I mentioned that there are better ways to solve this problem. 
I will talk about these methods here. </p>
<p>In this problem, we have to calculate the probabilities for two given sequences to come out first. 
There are at least two ways to do this. 
The first way is to use Markov Chain, which is simple and direct. 
As long as we can write down the transition matrix,
we can calculate the limiting probabilities in various ways.
Since this process is similar to Example ??, I will just skip it here. 
The other way is by introducing a new random variable <span class="math">\(M = min\{X_1 , X_2 \}\)</span>, 
where <span class="math">\(X_1\)</span> and <span class="math">\(X_2\)</span> are the steps needed for the two patterns to first come out. 
Conditioning on the event <span class="math">\(E_1 \equiv \text{pattern 1 comes out first}\)</span>, 
we get an equation involves <span class="math">\(P_1 \equiv P (E_1 )\)</span>, <span class="math">\(E(M )\)</span> 
and the expected time for some patterns (pattern 1, pattern 2 and probably some new patterns) to occur. 
Similarly, conditioning on the event <span class="math">\(E_2 \equiv \text{pattern 2 comes out first}\)</span>, 
we get an equation involves <span class="math">\(P_2 \equiv P (E_2 )\)</span>, <span class="math">\(E(M )\)</span>
and the expected time of some patterns (pattern 1, pattern 2 and probably
some new patterns) to occur. 
In addition, we have the constraint <span class="math">\(P_1 + P_2 = 1\)</span>. 
I have already talked about how to calculate the expected time for a sequence to occur 
in the post <a href="http://dclong.github.io/en/blog/how-long-observe-pattern/">How Long Does It Take to Observe a Sequence?</a>,
so what we have to do is just to solve a group of linear equations. </p>
<p>Before doing any calculation, I guess many people will choose pattern "HHH". 
However, this pattern is beaten by "THH". 
There's an easy way to show this. 
Suppose we first observe sequence HHH at step <span class="math">\(n(&gt;3)\)</span>, 
then the outcome must be "T" at step <span class="math">\(n − 3\)</span>,
which means that we have observed "THH" at step <span class="math">\(n − 1\)</span>. 
So for "HHH" to win against "THH", it must appear at step 3. 
So the probability for "HHH" to beat "THH" is <span class="math">\(0.7^3 = 0.343 &lt; 0.5\)</span>, 
i.e. "HHH" is not as good as "THH".
This method is very neat, but unfortunately it does not work for all pairs of patterns. 
To compare other pairs of patterns, 
we can use function "PatternFirstComeOurProbability" in the code of the post 
<a href="http://dclong.github.io/en/blog/how-long-observe-pattern/">How Long Does It Take to Observe a Sequence?</a>. </p>
<div class="highlight"><pre><span></span><code>PatternFirstComeOutProbability[{ {1, 1, 1}, {0, 1, 1} }, {1, 0}, {7/10, 3/10}]
{219/49, 343/1000, 657/1000}
</code></pre></div>

<p>From the above result we can see that the chance for pattern "HHH" to beat
pattern "THH" is <span class="math">\(343/1000 = 0.343 &lt; 0.5\)</span> which matches the results I got
before.</p>
<p>Now we already know that pattern "HHH" is beaten by pattern "THH". 
A nature question people might ask is that cannot pattern "THH" beat all other
patterns? The answer is no, and actually there's no pattern which can beat all
other patterns in this problem. 
The following Mathematica code will help us
to calculate the probability for a pattern to come our first when compared to
some other pattern.</p>
<div class="highlight"><pre><span></span><code><span class="n">patterns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tuples</span><span class="o">[</span><span class="n">{0, 1}, 3</span><span class="o">]</span><span class="p">;</span>
<span class="n">ProbMatrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Table</span><span class="o">[</span><span class="n">Null, {8}, {8}</span><span class="o">]</span><span class="p">;</span>
<span class="k">For</span><span class="o">[</span><span class="n">i = 1, i &lt; 8, i++,</span>
<span class="n">    For[j = i + 1, j &lt;= 8, j++,</span>
<span class="n">        probs =</span>
<span class="n">        PatternFirstComeOutProbability[{patterns[[i</span><span class="o">]</span><span class="err">]</span><span class="p">,</span><span class="w"> </span><span class="n">patterns</span><span class="o">[</span><span class="n">[j</span><span class="o">]</span><span class="err">]}</span><span class="p">,</span><span class="w"> </span><span class="err">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="err">{</span><span class="mi">7</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="o">/</span><span class="mi">10</span><span class="err">}]</span><span class="p">;</span>
<span class="w">        </span><span class="n">ProbMatrix</span><span class="o">[</span><span class="n">[i, j</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">probs</span><span class="o">[</span><span class="n">[2</span><span class="o">]</span><span class="err">]</span><span class="p">;</span>
<span class="w">        </span><span class="n">ProbMatrix</span><span class="o">[</span><span class="n">[j, i</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">probs</span><span class="o">[</span><span class="n">[3</span><span class="o">]</span><span class="err">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">]</span>
<span class="err">]</span><span class="p">;</span>
<span class="k">For</span><span class="o">[</span><span class="n">i = 1, i &lt;= 8, i++,</span>
<span class="n">    AppendTo[ProbMatrix[[i</span><span class="o">]</span><span class="err">]</span><span class="p">,</span>
<span class="w">    </span><span class="nf">Min</span><span class="o">[</span><span class="n">Drop[ProbMatrix[[i</span><span class="o">]</span><span class="err">]</span><span class="p">,</span>
<span class="w">    </span><span class="n">Flatten</span><span class="o">[</span><span class="n">Position[ProbMatrix[[i</span><span class="o">]</span><span class="err">]</span><span class="p">,</span><span class="w"> </span><span class="k">Null</span><span class="err">]]]]]</span>
<span class="err">]</span><span class="p">;</span>
<span class="k">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StringJoin</span><span class="w"> </span><span class="o">/</span><span class="err">@</span><span class="w"> </span><span class="n">IntegerString</span><span class="w"> </span><span class="o">/</span><span class="err">@</span><span class="w"> </span><span class="n">patterns</span><span class="p">;</span>
<span class="n">TableForm</span><span class="o">[</span><span class="n">ProbMatrix, TableHeadings -&gt; {AppendTo[names, &quot;Min&quot;</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="k">names</span><span class="err">}]</span>
</code></pre></div>

<p>The result of the above code is presented in 
<a href="http://dclong.github.io/media/pattern/pattern-first-out-probability.pdf">Table 1</a>. 
From Table 1, we can see
that none of the 8 rows has values that're all at least 0.5, which means that none
of the 8 patterns can beat all other patterns. 
Though we cannot find a pattern
which can always give you a higher chance to win against other patterns, we still
have to make a decision. Suppose we have to let our competitor know which
pattern we choose , and he/she is smart enough (which means that he/she will
always make the best choice based the pattern we choose), we want to choose
the pattern which yields highest winning probability. So we have to choose
the pattern which is the best (yields the highest winning probability) in the
worst situation. This is kind of like the Mini-Max rule in decision theory. The
following Mathematica code help us find the right pattern.</p>
<div class="highlight"><pre><span></span><code>patterns[[Flatten[Position[ProbMatrix[[All, 9]], Max[ProbMatrix[[All, 9]]]]]]]
{ {&quot;T&quot;, &quot;H&quot;, &quot;H&quot;} }
</code></pre></div>

<p>So if the other player is smart enough, we should choose pattern "THH".
Though in this problem we only compare two patterns at a time, function
"PatternFirstComeOurProbability" can handle the case when multiple patterns
are involved. For example, suppose 3 people are in this game and they choose
pattern "THH", "HHH" and "TTT" respectively. Running function 
"PatternFirstComeOurProbability" in Mathematica yields the following result.</p>
<div class="highlight"><pre><span></span><code>PatternFirstComeOutProbability[{ {&quot;T&quot;, &quot;H&quot;, &quot;H&quot;}, {&quot;H&quot;, &quot;H&quot;,&quot;H&quot;}, {&quot;T&quot;, &quot;T&quot;, &quot;T&quot;} }, {&quot;H&quot;, &quot;T&quot;}, {7/10, 3/10}]
{30441/7270, 418509/727000, 343/1000, 5913/72700}
N[%]
{4.18721, 0.575666, 0.343, 0.0813343}
</code></pre></div>

<p>That is the probabilities for the 3 people to win are about 0.576, 0.343 and 0.081
respectively.
Indeed function "PatternFirstComeOurProbability" is powerful, but it also
has a limitation. It might give us wrong results when patterns with different
lengths are compared with function PatternFirstComeOurProbability. 
For example, pattern "HT" will definitely appear before pattern "HHTH", however,
function PatternFirstComeOurProbability doesn't give us the right answer.</p>
<div class="highlight"><pre><span></span><code>PatternFirstComeOutProbability[{ {&quot;H&quot;, &quot;T&quot;}, {&quot;H&quot;, &quot;H&quot;, &quot;T&quot;, &quot;H&quot;} }, {&quot;H&quot;, &quot;T&quot;}]
{9/2, 3/4, 1/4}
</code></pre></div>

<p>These kind of situations are easy to handle. A always safe way compare patterns
with differen lengths is to change the problem to one in which all patterns have
the same length. For example, instead of letting function PatternFirstComeOur-
Probability compare patterns "HH" and "HTH", we can let it compare patterns
"HHT", "HHH" and "HTT".
Based on the above idea, it's easy to write a function which is able to handle
all situations, however, this is trivia and I don't think it's worth my time. Time
is finite while knowledge is infinite. We should spend time on more valuable
things.</p>
<p>Actually we've killed multiple birds with one stone in this problem. We can
also calculate the expected time for a pattern to show up, given that some
other pattern has already occurred, 
see function PatternAdditionalExpected Time. 
However, this function have a similar issue as function PatternFirst-
ComeOurProbability has. And what's more, we have to carefully define what
"addition step needed" means.</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js','color.js','mhchem.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">Ben Chuanlong Du</span>
  </span>
<time datetime="2012-07-30T15:13:01-07:00" pubdate>Jul 30, 2012</time>  <span class="categories">
    <a class="category" href="https://www.legendu.net/en/tag/mathematica.html">Mathematica</a>
    <a class="category" href="https://www.legendu.net/en/tag/pattern.html">pattern</a>
    <a class="category" href="https://www.legendu.net/en/tag/markov-chain.html">Markov chain</a>
    <a class="category" href="https://www.legendu.net/en/tag/statistics.html">statistics</a>
    <a class="category" href="https://www.legendu.net/en/tag/probability.html">probability</a>
    <a class="category" href="https://www.legendu.net/en/tag/sequence.html">sequence</a>
    <a class="category" href="https://www.legendu.net/en/tag/coin.html">coin</a>
    <a class="category" href="https://www.legendu.net/en/tag/fun-problems.html">fun problems</a>
  </span>
</p>    </footer>
  </article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="https://www.legendu.net/en/blog/find-tips/">Tips on the find command in Linux</a>
      </li>
      <li class="post">
          <a href="https://www.legendu.net/en/blog/hands-on-dict-python/">Hands on dict in Python</a>
      </li>
      <li class="post">
          <a href="https://www.legendu.net/en/blog/install-python-in-mac/">Install Python in macOS</a>
      </li>
      <li class="post">
          <a href="https://www.legendu.net/en/blog/my-docker-images/">My Docker Images</a>
      </li>
      <li class="post">
          <a href="https://www.legendu.net/en/blog/pdftk-examples/">Use pdftk to Manipulating PDF Files</a>
      </li>
    </ul>
  </section>
  <section>
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="https://www.legendu.net/en/category/ai.html">AI</a></li>
        <li><a href="https://www.legendu.net/en/category/career.html">Career</a></li>
        <li><a href="https://www.legendu.net/en/category/computer-science.html">Computer Science</a></li>
        <li><a href="https://www.legendu.net/en/category/fun-problems.html">Fun Problems</a></li>
        <li><a href="https://www.legendu.net/en/category/internet.html">Internet</a></li>
        <li><a href="https://www.legendu.net/en/category/os.html">OS</a></li>
        <li><a href="https://www.legendu.net/en/category/research.html">Research</a></li>
        <li><a href="https://www.legendu.net/en/category/software.html">Software</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
  <ul class="tagcloud">
  </ul>
  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
      <a href="https://github.com/legendu-net">@legendu-net</a> on GitHub
    <script type="text/javascript">
      $.domReady(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'https://www.legendu.net/en/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'legendu-net',
              count: 5,
              skip_forks: true,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="https://www.legendu.net/en/theme/js/github.js" type="text/javascript"> </script>
  </section>

    <section>
        <h1>Social</h2>
        <ul>
            <li><a href="https://www.linkedin.com/in/ben-chuanlong-du-1239b221/" target="_blank">LinkedIn</a></li>
            <li><a href="https://hub.docker.com/u/dclong" target="_blank">Docker Hub</a></li>
            <li><a href="https://stackoverflow.com/users/7808204/benjamin-du?tab=profile" target="_blank">Stack Overflow</a></li>
            <li><a href="https://twitter.com/longendu" target="_blank">Twitter</a></li>
        <!--
            <li><a href="https://www.legendu.net/en/" type="application/rss+xml" rel="alternate">RSS</a></li>
            -->
        </ul>
    </section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Ben Chuanlong Du -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3STS9BVPF6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3STS9BVPF6');
</script>
	<script type="text/javascript">
	  var disqus_shortname = 'dclong';
          var disqus_identifier = '/blog/best-strategy-2/';
          var disqus_url = 'https://www.legendu.net/en/blog/best-strategy-2/';
          var disqus_title = 'Which One Is the Best Strategy? (continued)';
	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
</body>
</html>