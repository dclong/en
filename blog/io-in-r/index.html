<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Input and Output in R</title>
  <meta name="author" content="Ben Chuanlong Du">

  <link href="http://www.legendu.net/en/atom.xml" type="application/atom+xml" rel="alternate"
        title="Ben Chuanlong Du's Blog Atom Feed" />


  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="http://www.legendu.net/en/favicon.png" rel="icon">
  <link href="http://www.legendu.net/en/theme/css/main_2.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="http://www.legendu.net/en/theme/js/modernizr-2.0.js"></script>
  <script src="http://www.legendu.net/en/theme/js/ender.js"></script>
  <script src="http://www.legendu.net/en/theme/js/octopress.js" type="text/javascript"></script>

  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://www.legendu.net/en/">Ben Chuanlong Du's Blog</a></h1>
    <h2>And let it direct your passion with reason.</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://www.legendu.net/en/atom.xml" rel="subscribe-rss">RSS</a></li>
</ul>

<form name="search" action="https://www.bing.com/search" method="get" onSubmit="return build_query()">
  <fieldset role="search">
      <!--
    <input type="hidden" name="q" value="site:http://www.legendu.net/en" />
        -->
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<script type = "text/javascript">
    function build_query() {
        var query = document.forms["search"]["q"].value;
        var prefix = "site:http://www.legendu.net/en "
        if (!query.startsWith(prefix)) {
            query = prefix + query;
            document.forms["search"]["q"].value = query;
        }
        return true;
    }
</script>

<ul class="main-navigation">
    <li><a href="http://www.legendu.net">Home</a></li>
    <li><a href="http://www.legendu.net/en">Blog</a></li>
    <li><a href="http://www.legendu.net/en/archives.html">Archives</a></li>
    <li><a href="http://www.legendu.net/pages/about">About</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Input and Output in R</h1>
      <p class="meta"><time datetime="2016-07-09T18:20:45-07:00" pubdate>Jul 09, 2016</time></p>
</header>

  <div class="entry-content"><h2 id="readtable-readcsv-readdelim-etc">read.table, read.csv, read.delim, etc.</h2>
<ol>
<li>
<p>It is suggested that you use <code>read.csv</code>/<code>read.delim</code> and avoid using <code>read.table</code>.
This is because that the <code>comment.char</code> is off for <code>read.csv</code>/<code>read.delim</code> and on for <code>read.table</code> by default. 
My experience is that data seldom has comments in them 
and people are usually not aware that <code>comment.char</code> is on for <code>read.table</code> by default. 
When there are "comment chararacters" in data which are not intended to be comment characters,
you screw up if you read data using <code>read.table</code> and forget to turn off comment using <code>comment.char = ''</code>. </p>
</li>
<li>
<p>By default, 
lines starting with <code>#</code> are treated as comment lines 
and thus are ignored when reading data using <code>read.table</code>, etc.
If a line is not a comment line, 
avoid starting it with <code>#</code>. 
Or you can specify a different comment character 
(e.g., <code>$</code> using option <code>comment.char = "$"</code>).</p>
</li>
<li>
<p>It is suggested that you always use <code>stringsAsFactors = FALSE</code> 
when constructing a data frame (data.frame, as.data.frame, read.table, read.csv, etc.).
Factors causes more troubles than conveniences. 
If you do need factors (for building models),
just manual convert columns to factors.</p>
</li>
<li>
<p>If a data row have an extra column/field (e.g., due to missing quotes in CSV format),
R will not throw error but instead treats the data to have a row names column. 
This results in shifted columns in some (shorter) rows. 
You can examining the format of a data file 
using the function <code>count.fields</code> 
which counts the number of fields in each line.</p>
</li>
<li>
<p><code>read.csv</code> for standard CSV files while <code>read.csv2</code> is for European CSV format. </p>
</li>
</ol>
<h2 id="writetable-writecsv-writedelim-etc">write.table, write.csv, write.delim, etc.</h2>
<ol>
<li>
<p>It is suggested that you write data frames into CSV format.
CSV format has a clear definition. 
If you tell people that a file is in CSV format,
they know how to read it. 
But if you tell people that a file is in a general delimited format,
people have to ask about what the delimiter is 
and whether fields are quoted, etc.</p>
</li>
<li>
<p>The function<code>write.table</code> writes a data frame or a matrix into a file. 
Note that it can also append data into a file. </p>
</li>
</ol>
<div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="nf">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">24</span><span class="p">,</span> <span class="n">nrow</span> <span class="o">=</span> <span class="m">6</span><span class="p">)</span>
<span class="nf">colnames</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span> <span class="nf">paste0</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">)</span>
<span class="nf">write.table</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">&#39;out.txt&#39;</span><span class="p">)</span>
<span class="n">x[</span><span class="p">,</span> <span class="n">]</span> <span class="o">=</span> <span class="m">0</span>
<span class="nf">write.table</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">&#39;out.txt&#39;</span><span class="p">,</span> <span class="n">append</span> <span class="o">=</span> <span class="bp">T</span><span class="p">,</span> <span class="n">col.names</span> <span class="o">=</span> <span class="bp">F</span><span class="p">)</span>
</pre></div>


<ol>
<li>
<p>By default <code>write.table</code> output missing values as character NA (<code>na = "NA"</code>). 
It is suggested that you output missing values as empty strings (na = "") as it is more portable. 
Other programming languages do not recognize character <code>NA's</code> as missing values. </p>
</li>
<li>
<p>Always quote fields when you write data into CSV format.</p>
</li>
<li>
<p><code>row.names</code> have different means in <code>read.table</code> and <code>write.table</code>.
<code>row.names</code> is a logical variable indicating 
whether you want to output row names or not in <code>write.table</code>,
however, it is not a logical variable indicating whether there is a row names in the data.
It is much more complicated. 
Please refer to the R help doc for detailed explanation.</p>
</li>
<li>
<p>It is suggested that you never write row names into files. 
If row names contains useful informtion, 
write row names into file as a column/field.
The reason is that row names causes troubles in IO. 
On one hand,
it is not convenient to read in a file 
with row names into other programming language. 
On another hand,
row names causes side effect in R too.</p>
</li>
</ol>
<h2 id="ms-excel">MS Excel</h2>
<p><a href="http://www.thertrader.com/2014/02/11/a-million-ways-to-connect-r-and-excel/">http://www.thertrader.com/2014/02/11/a-million-ways-to-connect-r-and-excel/</a>
It is suggested that you avoid using Excel as input/ouput data format. 
CSV is a better alternative.
However, 
if you do have to use Excel as input/output data format,
read the following tips.</p>
<ol>
<li>
<p>There are lots of ways to read data from and write data into Excel documents. 
For example, 
packages <code>xlsReadWrite</code>, <code>xlsx</code>, <code>RODBC</code> 
(and many more) all offers ways to import data from and export data to Excel documents. 
<code>xlsx</code> (which offers <code>read.xlsx</code> and <code>write.xlsx</code>) is good package for dealing with Excel spreadsheet.
<code>RODBC</code> is a universal way to deal with all kinds of databases 
(not just Excel spreadsheet). </p>
</li>
<li>
<p>It is usually very slow to read in (or write to) a large Excel spreadsheet.
It is suggested that you convert large Excel spreadsheets to CSV files first 
and then read in them.
Also, write data into CSV files instead of Excel spreadsheet.
However, 
be careful that the stupid Excel might loss information when converting to CSV format.
Generally speaking, 
this happens when there are very long numbers.</p>
</li>
<li>
<p>Excel might scilently format opened CSV (or imported text) files. 
Generally speaking,
this happens when there are very long numbers in the text file.
Be careful not to introduce undesired changed. 
If you just open a CSV file to view it and do not want change its content, 
then just discard any changes Excel has made. 
If you indeed want to change CSV file in Excel, 
keep your fingers cross. </p>
</li>
</ol>
<h2 id="binary-data">Binary Data</h2>
<ol>
<li>The function <code>readBin</code> reads in binary data 
and the function <code>writeBin</code> writes binary data into files. 
Both of the two functions have limits on the size of data that they can deal at a time. 
For large binary data, 
you have to use <code>readBin/writeBin</code> multiple times to read/write them from/to files.
<code>readBin</code> and <code>writeBin</code> are compatible with <code>fwrite</code> and <code>fread</code> in MATLAB. 
<code>fread</code> and <code>fwrite</code> are C style functions, ... (to be checked for compatible with c/c++). 
However, <code>readBin</code> and <code>writeBin</code> is not compatible with 
Java classes <code>DataOutputStream</code> and <code>DataInputStream</code>. 
To read binary data written using <code>DataOutputStream</code> from Java, 
you can call Java code for reading binary data using <code>rJava</code> in R; 
to write binary data that is recognized by <code>DataInputStream</code> in Java, 
you can call Java code for writing binary data using <code>rJava</code> in R.</li>
</ol>
<h2 id="misc">Misc</h2>
<ol>
<li>All most all input/output functions in R support reading data 
from all kinds of source including files, console, clipboard and website.
For example, 
if you have copied a block of data from an Excel document, 
you can read it into R using the following command.</li>
</ol>
<div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="nf">read.table</span><span class="p">(</span><span class="s">&#39;clipboard&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s">&#39;\t&#39;</span><span class="p">)</span>
</pre></div>


<p>This is good and quick way to import part of the data from a Excel document into in R. 
You do not have to worry about formula in cells. 
When you read data from Excel, values (instead formulas) are read in.
If the data is on a website, 
you can just pass the URL to <code>read.table</code> (or <code>read.delim</code>, <code>read.csv</code>, etc.) to read it.</p>
<ol>
<li>
<p><code>print</code> prints an R object to the R console 
and <code>cat</code> can print multiple objects to the R console, clipboard or files. 
There is some difference between the outputs generated by these two functions.
Generally speaking, 
if you want to see the content of an object in R scenario 
(keep special characters as they are), 
you want to use <code>print</code>; 
if you want to see the content in human readable format
(special characters are translated), 
you want to use function <code>cat</code>.
I have to mention that <code>cat</code> doesn't work for all types of R objects 
(e.g. objects of <code>xtable</code>).</p>
</li>
<li>
<p>The function <code>scan</code> is extremely powerful and flexible. 
You can skip first <code>k</code> lines using the option <code>skip = k</code>.
For example, 
the following command skips the first 5 lines.</p>
</li>
</ol>
<div class="highlight"><pre><span></span><span class="nf">scan</span><span class="p">(</span><span class="n">what</span> <span class="o">=</span> <span class="nf">double</span><span class="p">(),</span> <span class="n">skip</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
</pre></div>


<p>You can skip lines starting with special characters using the option <code>comment.char</code>.
For example, 
the following command skips lines starting with "#".</p>
<div class="highlight"><pre><span></span><span class="nf">scan</span><span class="p">(</span><span class="n">what</span> <span class="o">=</span> <span class="nf">double</span><span class="p">(),</span> <span class="n">comment.char</span> <span class="o">=</span> <span class="s">&quot;#&quot;</span><span class="p">)</span>
</pre></div>


<p>You can decide which special strings are treated as missing values using the option <code>na.string</code>.
For example,
the following command treats "NA" as missing values.</p>
<div class="highlight"><pre><span></span><span class="nf">scan</span><span class="p">(</span><span class="n">what</span> <span class="o">=</span> <span class="nf">double</span><span class="p">(),</span> <span class="n">na.string</span> <span class="o">=</span> <span class="s">&quot;NA&quot;</span><span class="p">)</span>
</pre></div>


<p>You can limit the number of data values/lines to be read in, etc.
Many input functions in R are based on the function <code>scan</code>, 
for example, <code>read.table</code>.
These functions inherits the powerfulness and flexibility of <code>scan</code>. 
<code>scan</code> is also helpful for interactive programming. 
For example, you can read a string into the variable <code>input</code> using the following commmand.</p>
<div class="highlight"><pre><span></span><span class="nf">scan</span><span class="p">(</span><span class="n">what</span> <span class="o">=</span> <span class="nf">character</span><span class="p">(),</span> <span class="n">n</span> <span class="o">=</span> <span class="m">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">input</span>  
</pre></div>


<p>However, <code>scan</code> is used to read in a vector, 
so the data to be read in <em>at the same time</em> must be of the same type. </p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">Ben Chuanlong Du</span>
  </span>
<time datetime="2016-07-09T18:20:45-07:00" pubdate>Jul 09, 2016</time>  <span class="categories">
    <a class="category" href="http://www.legendu.net/en/tag/r.html">R</a>
    <a class="category" href="http://www.legendu.net/en/tag/io.html">IO</a>
    <a class="category" href="http://www.legendu.net/en/tag/programming.html">programming</a>
    <a class="category" href="http://www.legendu.net/en/tag/cran.html">CRAN</a>
  </span>
</p>    </footer>
  </article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="http://www.legendu.net/en/blog/runtime-paths-in-python/">Runtime Paths in Python</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/en/blog/configuration-scripts-for-the-blog-project-on-notebooks.ai/">Configuration Scripts for the Blog Project on Notebooks.Ai</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/en/blog/string-in-python/">String in Python</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/en/blog/my-docker-images/">My Docker Images</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/en/blog/docker-image-and-container-management/">Manage Docker Images and Containers</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="http://www.legendu.net/en/category/apple.html">Apple</a></li>
        <li><a href="http://www.legendu.net/en/category/fun-problems.html">Fun Problems</a></li>
        <li><a href="http://www.legendu.net/en/category/internet.html">internet</a></li>
        <li><a href="http://www.legendu.net/en/category/linux.html">Linux</a></li>
        <li><a href="http://www.legendu.net/en/category/network.html">Network</a></li>
        <li><a href="http://www.legendu.net/en/category/os.html">OS</a></li>
        <li><a href="http://www.legendu.net/en/category/programming.html">Programming</a></li>
        <li><a href="http://www.legendu.net/en/category/research.html">Research</a></li>
        <li><a href="http://www.legendu.net/en/category/software.html">Software</a></li>
        <li><a href="http://www.legendu.net/en/category/statistics.html">Statistics</a></li>
        <li><a href="http://www.legendu.net/en/category/work.html">Work</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
  <p class="tagcloud">
  </p>
  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
      <a href="https://github.com/dclong">@dclong</a> on GitHub
    <script type="text/javascript">
      $.domReady(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'http://www.legendu.net/en/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'dclong',
              count: 3,
              skip_forks: true,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="http://www.legendu.net/en/theme/js/github.js" type="text/javascript"> </script>
  </section>

    <section>
        <h1>Social</h2>
        <ul>
            <li><a href="https://www.linkedin.com/in/ben-chuanlong-du-1239b221/" target="_blank">LinkedIn</a></li>
            <li><a href="https://twitter.com/longendu" target="_blank">Twitter</a></li>
            <li><a href="https://www.facebook.com/chuanlong.du" target="_blank">Facebook</a></li>
        <!--
            <li><a href="http://www.legendu.net/en/" type="application/rss+xml" rel="alternate">RSS</a></li>
            -->
        </ul>
    </section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Ben Chuanlong Du -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30259661-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
	<script type="text/javascript">
	  var disqus_shortname = 'dclong';
          var disqus_identifier = '/blog/io-in-r/';
          var disqus_url = 'http://www.legendu.net/en/blog/io-in-r/';
          var disqus_title = 'Input and Output in R';
	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
</body>
</html>